<div class="header-pages">
  <h3><b>My groceries list</b></h3>
</div>

<div class ="favorite-container">
  <div id="booking-form" class="p-3 container">
    <p></p>
    <p>Select a <b>range of dates</b> below:</p>
    <%= simple_form_for [@grocery_list] do |f| %>
        <%= f.input :start_date, as: :string, input_html: { data: { controller: "grocery-list-datepicker" } }, label: false, placeholder: 'Select these dates' %>
        <%= f.button :submit, "Generate my list", class: "btn orange-btn mb-3" %>
    <% end %>
      <% if @aisle_hash.nil? || @aisle_hash.empty?%>
      <h2 class="mt-3">Use the above calendar to select the dates or add some meals to your calendar :) </h2>

    <% else %>
      <% @aisle_hash.sort.each do |key,items| %>
        <p class= "pt-3"><b><%= key %></b></p>
        <% items.each do |item| %>
          <% ingr = Ingredient.find_by(id: item.ingredient_id) %>
          <% recip_ingr = RecipeIngredient.find_by(id: item.recipe_ingredient_id) %>
          <div class="list d-flex justify-content-normal">
            <%= simple_form_for [@grocery_list, item], data: {controller: "checked-list"} do |f| %>
              <%= f.input :bought, as: :boolean, label: false,boolean_style: :nested, input_html: {data: {action: "click->checked-list#bought"}} %>
            <% end %>
              <li class="ingredient-card mt-2" style="width:95%">
                <div class="grid"><h6><%= ingr.name.capitalize %></h6></div>
                <div class="grid"><h6><%= item.total_amount %> <%= recip_ingr.unit %></h6></div>
              </li>
          </div>
        <% end %>
      <% end %>
    <% end %>
  </div>
</div>
